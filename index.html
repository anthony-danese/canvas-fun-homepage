<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AP Physics C Electricity and Magnetism - Matter.js Fun</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #fff;
      height: 100%;
      width: 100%;
      font-family: 'Comic Sans MS', 'Comic Sans', cursive, sans-serif;
    }
    #canvas-container {
      width: 100vw;
      height: 100vh;
      position: absolute;
      top: 0; left: 0;
    }
    .instructions {
      position: absolute;
      z-index: 2;
      width: 100%;
      text-align: center;
      top: 16px;
      color: #222;
      font-size: 1.2rem;
      pointer-events: none;
      user-select: none;
      font-family: inherit;
      font-weight: bold;
      letter-spacing: 0.04em;
    }
  </style>
</head>
<body>
  <div class="instructions">Drag and drop the letters! Platforms are fixed.</div>
  <div id="canvas-container"></div>
  <!-- Matter.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <script>
    // Shortcuts
    const {Engine, Render, Runner, World, Bodies, Mouse, MouseConstraint, Composite, Body} = Matter;

    // Phrases and grouping
    const topPhrase = "AP Physics C";
    const bottomPhrase = "Electricity & Magnetism";

    // Colors for letters
    const colors = [
      "#ff4e50", "#f9d423", "#24c6dc", "#5433ff", "#fc913a", "#a8e063", "#e94057",
      "#ffd452", "#43cea2", "#ff6e7f", "#4e54c8", "#dd5e89", "#f7b42c", "#e96443"
    ];

    // Engine and world
    const engine = Engine.create();
    const world = engine.world;

    // Canvas sizing
    const w = window.innerWidth;
    const h = window.innerHeight;

    // Renderer
    const render = Render.create({
      element: document.getElementById('canvas-container'),
      engine: engine,
      options: {
        width: w,
        height: h,
        wireframes: false,
        background: 'rgba(0,0,0,0)'
      }
    });

    Render.run(render);

    // Runner
    const runner = Runner.create();
    Runner.run(runner, engine);

    // Letter sizing
    const fontSize = Math.min(64, Math.max(38, Math.floor(w / 20)));
    const letterSpacing = fontSize * 0.85;
    const letterRadius = fontSize * 0.7 / 2;

    // Platform positions
    const marginTop = 60;
    const spaceBetweenLines = fontSize * 3.2;
    const platformWidth = Math.min(w*0.9, 1100);
    const platformOffsetX = (w-platformWidth)/2;
    const platformThickness = 8;

    // Platform Y positions
    const topPlatformY = marginTop + fontSize*1.2;
    const bottomPlatformY = topPlatformY + spaceBetweenLines;

    // Add platforms (static lines)
    const topPlatform = Bodies.rectangle(
      w/2, topPlatformY, platformWidth, platformThickness,
      { isStatic: true, 
        friction: 0.1,
        render: { fillStyle: "#333" }
      }
    );
    const bottomPlatform = Bodies.rectangle(
      w/2, bottomPlatformY, platformWidth, platformThickness,
      { isStatic: true, 
        friction: 0.1,
        render: { fillStyle: "#333" }
      }
    );
    World.add(world, [topPlatform, bottomPlatform]);

    // Create letter bodies for top row
    let topLetters = [];
    let topStartX = w/2 - ((topPhrase.replace(/ /g,"").length-1) * letterSpacing) / 2;
    let letterIndex = 0;
    for(let i = 0; i < topPhrase.length; i++) {
      const char = topPhrase[i];
      if(char === " ") continue; // skip spaces

      const body = Bodies.circle(
        topStartX + letterIndex * letterSpacing + (Math.random()-0.5)*10, 
        marginTop,
        letterRadius,
        {
          restitution: 0.8,
          friction: 0.005,
          density: 0.002,
          render: {
            fillStyle: colors[letterIndex % colors.length],
            strokeStyle: "#fff",
            lineWidth: 3,
            text: {
              content: char,
              color: "#222",
              size: fontSize + "px",
              fontFamily: "Comic Sans MS, Comic Sans, cursive, sans-serif"
            }
          }
        }
      );
      body.label = "letter";
      body.letter = char;
      topLetters.push(body);
      letterIndex++;
    }

    // Create letter bodies for bottom row
    let bottomLetters = [];
    let bottomStartX = w/2 - ((bottomPhrase.replace(/ /g,"").length-1) * letterSpacing) / 2;
    let bottomLetterIndex = 0;
    for(let i = 0; i < bottomPhrase.length; i++) {
      const char = bottomPhrase[i];
      if(char === " ") continue;

      const body = Bodies.circle(
        bottomStartX + bottomLetterIndex * letterSpacing + (Math.random()-0.5)*10, 
        topPlatformY + spaceBetweenLines - fontSize*1.1,
        letterRadius,
        {
          restitution: 0.8,
          friction: 0.005,
          density: 0.002,
          render: {
            fillStyle: colors[(bottomLetterIndex+7) % colors.length],
            strokeStyle: "#fff",
            lineWidth: 3,
            text: {
              content: char,
              color: "#222",
              size: fontSize + "px",
              fontFamily: "Comic Sans MS, Comic Sans, cursive, sans-serif"
            }
          }
        }
      );
      body.label = "letter";
      body.letter = char;
      bottomLetters.push(body);
      bottomLetterIndex++;
    }

    // Add letter bodies to world
    World.add(world, [...topLetters, ...bottomLetters]);

    // Floor and walls (to keep things in view)
    const wallThickness = 40;
    World.add(world, [
      Bodies.rectangle(w/2, h+wallThickness/2, w, wallThickness, {isStatic: true, render:{visible:false}}), // floor
      Bodies.rectangle(w/2, -wallThickness/2, w, wallThickness, {isStatic: true, render:{visible:false}}), // ceiling
      Bodies.rectangle(-wallThickness/2, h/2, wallThickness, h, {isStatic: true, render:{visible:false}}), // left
      Bodies.rectangle(w+wallThickness/2, h/2, wallThickness, h, {isStatic: true, render:{visible:false}}), // right
    ]);

    // Mouse control: Only let letters be dragged!
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
      mouse: mouse,
      constraint: {
        stiffness: 0.3,
        render: {visible: false}
      },
      // Only allow non-static bodies to be dragged (letters)
      filter: function(body) {
        return !body.isStatic && body.label === "letter";
      }
    });

    // To ensure only letters are draggable, override the default filter:
    mouseConstraint.collisionFilter = {
      group: 0,
      category: 0x0001,
      mask: 0xFFFFFFFF
    };
    mouseConstraint.body = null;

    // Only allow picking up letter bodies
    mouseConstraint._mouse.button = function(event, button) {
      if (button === 0) return true; // left click
      return false;
    };

    World.add(world, mouseConstraint);

    // Custom drawing of letter text over circles
    (function renderLetters(){
      const ctx = render.context;
      ctx.save();
      // Draw platforms as hand-drawn lines
      ctx.strokeStyle = "#333";
      ctx.lineWidth = platformThickness;
      ctx.beginPath();
      ctx.moveTo(platformOffsetX, topPlatformY);
      ctx.bezierCurveTo(w/3, topPlatformY-8, 2*w/3, topPlatformY+8, w-platformOffsetX, topPlatformY);
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(platformOffsetX, bottomPlatformY);
      ctx.bezierCurveTo(w/3, bottomPlatformY-4, 2*w/3, bottomPlatformY+6, w-platformOffsetX, bottomPlatformY);
      ctx.stroke();

      // Draw all letters (top + bottom)
      for(const body of [...topLetters, ...bottomLetters]){
        const pos = body.position;
        const angle = body.angle;
        ctx.save();
        ctx.translate(pos.x, pos.y);
        ctx.rotate(angle);

        // Draw main circle
        ctx.beginPath();
        ctx.arc(0, 0, letterRadius, 0, 2*Math.PI);
        ctx.closePath();
        ctx.fillStyle = body.render.fillStyle;
        ctx.shadowColor = "#222";
        ctx.shadowBlur = 12;
        ctx.fill();
        ctx.lineWidth = body.render.lineWidth;
        ctx.strokeStyle = body.render.strokeStyle;
        ctx.stroke();

        // Draw letter
        ctx.font = body.render.text.size + " " + body.render.text.fontFamily;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillStyle = body.render.text.color;
        ctx.shadowColor = "#fff";
        ctx.shadowBlur = 0;
        ctx.fillText(body.letter, 0, 2);

        ctx.restore();
      }
      ctx.restore();
      window.requestAnimationFrame(renderLetters);
    })();

    // Resize canvas on window resize
    window.addEventListener('resize', () => {
      render.canvas.width = window.innerWidth;
      render.canvas.height = window.innerHeight;
    });

    // Give letters a little drop animation
    setTimeout(()=>{
      [...topLetters, ...bottomLetters].forEach((body, idx) => {
        Body.applyForce(body, body.position, {
          x: (Math.random()-0.5)*0.04,
          y: Math.random()*0.04
        });
      });
    }, 500);

    // For mobile, make sure canvas is full screen
    render.canvas.style.position = "absolute";
    render.canvas.style.top = "0";
    render.canvas.style.left = "0";
    render.canvas.style.width = "100vw";
    render.canvas.style.height = "100vh";
  </script>
</body>
</html>
